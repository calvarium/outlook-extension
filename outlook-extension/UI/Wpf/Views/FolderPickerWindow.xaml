<Window x:Class="outlook_extension.UI.Wpf.Views.FolderPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:controls="clr-namespace:outlook_extension.UI.Wpf.Controls"
        xmlns:repeater="clr-namespace:outlook_extension.UI.Wpf.Controls.Repeater"
        mc:Ignorable="d"
        Title="Ordner auswählen"
        Width="580"
        Height="440"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <controls:SearchBarControl x:Name="SearchBar"
                                   SearchText="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                   PlaceholderText="Ordner suchen..." />
        <repeater:ItemsRepeater Grid.Row="1"
                                ItemsSource="{Binding Results}"
                                Orientation="Vertical">
            <repeater:ItemsRepeater.ItemTemplate>
                <DataTemplate>
                    <wpfui:Button Style="{StaticResource ResultItemButtonStyle}"
                                  Command="{Binding DataContext.SelectResultCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                  CommandParameter="{Binding}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <TextBlock Style="{StaticResource ResultTitleTextStyle}"
                                       Text="{Binding Title}" />
                            <TextBlock Grid.Row="1"
                                       Style="{StaticResource ResultSubtitleTextStyle}"
                                       Text="{Binding Subtitle}" />
                        </Grid>
                    </wpfui:Button>
                </DataTemplate>
            </repeater:ItemsRepeater.ItemTemplate>
        </repeater:ItemsRepeater>
        <TextBlock Grid.Row="2"
                   Margin="4,8,4,8"
                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                   Text="{Binding StatusText}" />
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <wpfui:Button Content="Abbrechen"
                          Margin="0,0,8,0"
                          Command="{Binding CloseCommand}" />
            <wpfui:Button Content="Auswählen"
                          Command="{Binding ConfirmCommand}" />
        </StackPanel>
    </Grid>
</Window>
